import{d as e,r as a,w as l,c as s,a as t,o as u,i as c,b as r,e as n,f as o,g as d,h as i,j as f,F as _,k as v,n as y,l as m,t as k,m as p,s as g,p as h,q as b,u as C,v as x,x as z}from"./index-VE_HmMG4.js";import{u as S}from"./user.DucKNo_G.js";import{a as E,_ as F}from"./_plugin-vue_export-helper.B_VXoL-J.js";const w=F(e({__name:"DatingMatchModal",props:{visible:{type:Boolean}},emits:["close","startChat"],setup(e,{emit:h}){const b=e,C=h,x=a(!1),z=a([]),S={"ç™½ç¾Šåº§":"â™ˆ","é‡‘ç‰›åº§":"â™‰","åŒå­åº§":"â™Š","å·¨èŸ¹åº§":"â™‹","ç‹®å­åº§":"â™Œ","å¤„å¥³åº§":"â™","å¤©ç§¤åº§":"â™","å¤©èåº§":"â™","å°„æ‰‹åº§":"â™","æ‘©ç¾¯åº§":"â™‘","æ°´ç“¶åº§":"â™’","åŒé±¼åº§":"â™“"};function F(){C("close")}return l(()=>b.visible,e=>{e&&async function(){x.value=!0,z.value=[];try{const e=await E.dating.topMatches();z.value=e}catch(e){g({title:e.message||"åŠ è½½å¤±è´¥",icon:"none"})}finally{x.value=!1}}()}),(e,a)=>{const l=o,g=c,h=p;return e.visible?(u(),s(g,{key:0,class:"match-modal",onClick:F},{default:r(()=>[n(g,{class:"modal-content",onClick:a[0]||(a[0]=v(()=>{},["stop"]))},{default:r(()=>[n(g,{class:"close-btn",onClick:F},{default:r(()=>[n(l,{class:"close-icon"},{default:r(()=>[d("Ã—")]),_:1})]),_:1}),n(g,{class:"modal-header"},{default:r(()=>[n(l,{class:"header-icon"},{default:r(()=>[d("ğŸ’•")]),_:1}),n(l,{class:"header-title"},{default:r(()=>[d("ç¼˜åˆ†åŒ¹é…")]),_:1}),n(l,{class:"header-subtitle"},{default:r(()=>[d("ä»100ä½å¼‚æ€§ä¸­ä¸ºä½ ç²¾é€‰æœ€ä½³åŒ¹é…")]),_:1})]),_:1}),x.value?(u(),s(g,{key:0,class:"loading-container"},{default:r(()=>[n(g,{class:"loading-spinner"}),n(l,{class:"loading-text"},{default:r(()=>[d("æ­£åœ¨ä¸ºä½ å¯»æ‰¾æœ€ä½³ç¼˜åˆ†...")]),_:1})]),_:1})):z.value.length>0?(u(),s(g,{key:1,class:"match-results"},{default:r(()=>[(u(!0),i(_,null,f(z.value,(e,a)=>(u(),s(g,{key:e.user.id,class:m(["match-card",`card-${a}`]),style:y({animationDelay:.15*a+"s"})},{default:r(()=>[n(g,{class:m(["rank-badge",`rank-${a}`])},{default:r(()=>[n(l,{class:"rank-number"},{default:r(()=>[d(k(a+1),1)]),_:2},1024)]),_:2},1032,["class"]),n(g,{class:m(["match-score",`score-${a}`])},{default:r(()=>[n(l,{class:"score-value"},{default:r(()=>[d(k(e.score),1)]),_:2},1024),n(l,{class:"score-label"},{default:r(()=>[d("%")]),_:1})]),_:2},1032,["class"]),n(g,{class:"avatar-section"},{default:r(()=>[e.user.avatar?(u(),s(h,{key:0,src:e.user.avatar,class:"user-avatar",mode:"aspectFill"},null,8,["src"])):(u(),s(g,{key:1,class:"user-avatar placeholder"},{default:r(()=>[n(l,{class:"avatar-text"},{default:r(()=>{var a;return[d(k((null==(a=e.user.nickname)?void 0:a[0])||"?"),1)]}),_:2},1024)]),_:2},1024)),n(g,{class:"zodiac-icon"},{default:r(()=>{return[d(k((a=e.user.zodiacSign,S[a]||"â­")),1)];var a}),_:2},1024)]),_:2},1024),n(g,{class:"user-info"},{default:r(()=>[n(l,{class:"user-name"},{default:r(()=>[d(k(e.user.nickname||"åŒ¿åç”¨æˆ·"),1)]),_:2},1024),n(g,{class:"user-tags"},{default:r(()=>[n(l,{class:"tag zodiac-tag"},{default:r(()=>[d(k(e.user.zodiacSign||"æœªçŸ¥æ˜Ÿåº§"),1)]),_:2},1024),n(l,{class:"tag gender-tag"},{default:r(()=>[d(k("male"===e.user.gender?"â™‚ ç”·":"â™€ å¥³"),1)]),_:2},1024)]),_:2},1024),e.user.bio?(u(),s(l,{key:0,class:"user-bio"},{default:r(()=>[d(k(e.user.bio),1)]),_:2},1024)):t("",!0)]),_:2},1024),n(g,{class:"chat-btn",onClick:a=>{return l=e.user,C("startChat",l.id),void F();var l}},{default:r(()=>[n(l,{class:"chat-icon"},{default:r(()=>[d("ğŸ’¬")]),_:1}),n(l,{class:"chat-text"},{default:r(()=>[d("å‘èµ·èŠå¤©")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["class","style"]))),128))]),_:1})):(u(),s(g,{key:2,class:"no-results"},{default:r(()=>[n(l,{class:"no-results-icon"},{default:r(()=>[d("ğŸ˜”")]),_:1}),n(l,{class:"no-results-text"},{default:r(()=>[d("æš‚æ— åŒ¹é…ç”¨æˆ·")]),_:1}),n(l,{class:"no-results-hint"},{default:r(()=>[d("è¯·å…ˆå®Œå–„æ‚¨çš„ä¸ªäººèµ„æ–™")]),_:1})]),_:1})),!x.value&&z.value.length>0?(u(),s(g,{key:3,class:"modal-footer"},{default:r(()=>[n(l,{class:"footer-text"},{default:r(()=>[d("åŸºäºæ˜Ÿåº§é…å¯¹ + äº”è¡Œå…«å­—ç»¼åˆè®¡ç®—")]),_:1})]),_:1})):t("",!0)]),_:1})]),_:1})):t("",!0)}}}),[["__scopeId","data-v-86260f0b"]]),D=F(e({__name:"DailyFortuneCard",setup(e,{expose:l}){const i=a(null),f=a(!1),_=h(()=>{const e=new Date;return`${e.getMonth()+1}æœˆ${e.getDate()}æ—¥`});async function v(){f.value=!0;try{const e=await E.dailyFortune.getToday();i.value=e}catch(e){console.error("è·å–ä»Šæ—¥è¿åŠ¿å¤±è´¥:",e)}finally{f.value=!1}}function y(){C({url:"/pages/daily-fortune/detail"})}return b(async()=>{await v()}),l({refresh:v}),(e,a)=>{const l=o,v=c;return u(),s(v,{class:"fortune-card",onClick:y},{default:r(()=>[n(v,{class:"fortune-header"},{default:r(()=>[n(l,{class:"fortune-title"},{default:r(()=>[d("ä»Šæ—¥è¿åŠ¿")]),_:1}),n(l,{class:"fortune-date"},{default:r(()=>[d(k(_.value),1)]),_:1})]),_:1}),f.value?(u(),s(v,{key:0,class:"fortune-loading"},{default:r(()=>[n(l,{class:"loading-text"},{default:r(()=>[d("åŠ è½½ä¸­...")]),_:1})]),_:1})):i.value?(u(),s(v,{key:1,class:"fortune-content"},{default:r(()=>[n(v,{class:"score-section"},{default:r(()=>{return[n(v,{class:m(["score-ring",(e=i.value.overallScore,e>=80?"excellent":e>=60?"good":"normal")])},{default:r(()=>[n(l,{class:"score-value"},{default:r(()=>[d(k(i.value.overallScore),1)]),_:1}),n(l,{class:"score-label"},{default:r(()=>[d("åˆ†")]),_:1})]),_:1},8,["class"]),n(v,{class:"score-info"},{default:r(()=>[n(l,{class:"score-summary"},{default:r(()=>[d(k(i.value.summary),1)]),_:1})]),_:1})];var e}),_:1}),i.value.precautions?(u(),s(v,{key:0,class:"precautions"},{default:r(()=>[n(l,{class:"precautions-label"},{default:r(()=>[d("âš ï¸ æ³¨æ„äº‹é¡¹")]),_:1}),n(l,{class:"precautions-text"},{default:r(()=>[d(k(i.value.precautions),1)]),_:1})]),_:1})):t("",!0),n(v,{class:"fortune-footer"},{default:r(()=>[i.value.luckyColor||i.value.luckyNumber?(u(),s(v,{key:0,class:"lucky-items"},{default:r(()=>[i.value.luckyColor?(u(),s(v,{key:0,class:"lucky-item"},{default:r(()=>[n(l,{class:"lucky-icon"},{default:r(()=>[d("ğŸ¨")]),_:1}),n(l,{class:"lucky-label"},{default:r(()=>[d(k(i.value.luckyColor),1)]),_:1})]),_:1})):t("",!0),i.value.luckyNumber?(u(),s(v,{key:1,class:"lucky-item"},{default:r(()=>[n(l,{class:"lucky-icon"},{default:r(()=>[d("ğŸ”¢")]),_:1}),n(l,{class:"lucky-label"},{default:r(()=>[d(k(i.value.luckyNumber),1)]),_:1})]),_:1})):t("",!0),i.value.luckyDirection?(u(),s(v,{key:2,class:"lucky-item"},{default:r(()=>[n(l,{class:"lucky-icon"},{default:r(()=>[d("ğŸ§­")]),_:1}),n(l,{class:"lucky-label"},{default:r(()=>[d(k(i.value.luckyDirection),1)]),_:1})]),_:1})):t("",!0)]),_:1})):t("",!0),n(l,{class:"more-hint"},{default:r(()=>[d("ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… â†’")]),_:1})]),_:1})]),_:1})):(u(),s(v,{key:2,class:"fortune-empty"},{default:r(()=>[n(l,{class:"empty-text"},{default:r(()=>[d("ç‚¹å‡»æŸ¥çœ‹ä»Šæ—¥è¿åŠ¿")]),_:1})]),_:1}))]),_:1})}}}),[["__scopeId","data-v-5dfd6ead"]]),I=F(e({__name:"index",setup(e){const l=S(),v=a(null),F=a(!1),I=a(null),j=[{key:"wood",name:"æœ¨",icon:"ğŸŒ²",color:"#4CAF50"},{key:"fire",name:"ç«",icon:"ğŸ”¥",color:"#F44336"},{key:"earth",name:"åœŸ",icon:"â›°ï¸",color:"#8D6E63"},{key:"metal",name:"é‡‘",icon:"âš”ï¸",color:"#FFC107"},{key:"water",name:"æ°´",icon:"ğŸ’§",color:"#2196F3"}],N={"ç™½ç¾Šåº§":"â™ˆ","é‡‘ç‰›åº§":"â™‰","åŒå­åº§":"â™Š","å·¨èŸ¹åº§":"â™‹","ç‹®å­åº§":"â™Œ","å¤„å¥³åº§":"â™","å¤©ç§¤åº§":"â™","å¤©èåº§":"â™","å°„æ‰‹åº§":"â™","æ‘©ç¾¯åº§":"â™‘","æ°´ç“¶åº§":"â™’","åŒé±¼åº§":"â™“"},O=h(()=>{var e,a;return(null==(e=v.value)?void 0:e.zodiacSign)||(null==(a=v.value)?void 0:a.fiveElements)});function $(){var e,a,l;if(!(null==(e=v.value)?void 0:e.fiveElements))return"æœªçŸ¥";try{const e=JSON.parse(v.value.fiveElements),s=null==(a=Object.entries(e).sort((e,a)=>a[1]-e[1])[0])?void 0:a[0];return(null==(l=j.find(e=>e.key===s))?void 0:l.name)||"æœªçŸ¥"}catch{return"æœªçŸ¥"}}function M(){var e,a,l;if(!(null==(e=v.value)?void 0:e.fiveElements))return"#999";try{const e=JSON.parse(v.value.fiveElements),s=null==(a=Object.entries(e).sort((e,a)=>a[1]-e[1])[0])?void 0:a[0];return(null==(l=j.find(e=>e.key===s))?void 0:l.color)||"#999"}catch{return"#999"}}function J(){var e,a,l;if(!(null==(e=v.value)?void 0:e.fiveElements))return"â“";try{const e=JSON.parse(v.value.fiveElements),s=null==(a=Object.entries(e).sort((e,a)=>a[1]-e[1])[0])?void 0:a[0];return(null==(l=j.find(e=>e.key===s))?void 0:l.icon)||"â“"}catch{return"â“"}}function A(){var e;if(!(null==(e=v.value)?void 0:e.fiveElements))return[];try{const e=JSON.parse(v.value.fiveElements);return j.filter(a=>e[a.key]>0).map(a=>({...a,count:e[a.key]})).sort((e,a)=>a.count-e.count)}catch{return[]}}async function B(){var e;if(null==(e=v.value)?void 0:e.id)try{const e=await E.astrology.calculate(v.value.id);v.value=e.user,l.setUserInfo(e.user),g({title:"è®¡ç®—æˆåŠŸ",icon:"success"})}catch(a){g({title:a.message||"è®¡ç®—å¤±è´¥",icon:"none"})}}function T(e){"/pages/shop/list"===e?z({url:e}):"/pages/dating/matches"===e?F.value=!0:C({url:e})}function U(){C({url:"/pages/user/profile"})}function q(){var e;(null==(e=v.value)?void 0:e.zodiacSign)&&C({url:`/pages/astrology/celebrities?zodiac=${v.value.zodiacSign}`})}function R(e){C({url:`/pages/dating/chat?otherUserId=${e}`})}return b(()=>{v.value=l.userInfo}),x(()=>{var e;(null==(e=I.value)?void 0:e.refresh)&&I.value.refresh()}),(e,a)=>{const l=o,g=c,h=p;return u(),s(g,{class:"container"},{default:r(()=>[n(w,{visible:F.value,onClose:a[0]||(a[0]=e=>F.value=!1),onStartChat:R},null,8,["visible"]),n(g,{class:"header"},{default:r(()=>[n(g,{class:"header-content"},{default:r(()=>[n(g,{class:"app-brand"},{default:r(()=>[n(l,{class:"brand-icon"},{default:r(()=>[d("âœ¨")]),_:1}),n(g,{class:"brand-text"},{default:r(()=>[n(l,{class:"brand-name"},{default:r(()=>[d("æ˜Ÿå¥‘é›†")]),_:1}),n(l,{class:"brand-slogan"},{default:r(()=>[d("æ¢ç´¢ä½ çš„æ˜Ÿåº§ä¸ç¼˜åˆ†")]),_:1})]),_:1})]),_:1}),n(g,{class:"header-actions"},{default:r(()=>[n(g,{class:"profile-btn",onClick:U},{default:r(()=>{var e;return[(null==(e=v.value)?void 0:e.avatar)?(u(),s(h,{key:0,src:v.value.avatar,class:"avatar-img",mode:"aspectFill"},null,8,["src"])):(u(),s(l,{key:1,class:"avatar-placeholder"},{default:r(()=>[d("ğŸ‘¤")]),_:1}))]}),_:1})]),_:1})]),_:1}),v.value&&O.value?(u(),s(g,{key:0,class:"user-card"},{default:r(()=>[n(g,{class:"zodiac-section",onClick:q},{default:r(()=>[n(l,{class:"zodiac-icon"},{default:r(()=>{return[d(k((e=v.value.zodiacSign,N[e]||"â­")),1)];var e}),_:1}),n(g,{class:"zodiac-info"},{default:r(()=>[n(l,{class:"zodiac-label"},{default:r(()=>[d("æ˜Ÿåº§")]),_:1}),n(l,{class:"zodiac-value"},{default:r(()=>[d(k(v.value.zodiacSign||"æœªçŸ¥"),1)]),_:1})]),_:1})]),_:1}),n(g,{class:"divider"}),n(g,{class:"element-section"},{default:r(()=>[n(l,{class:"element-icon"},{default:r(()=>[d(k(J()),1)]),_:1}),n(g,{class:"element-info"},{default:r(()=>[n(l,{class:"element-label"},{default:r(()=>[d("ä¸»å¯¼äº”è¡Œ")]),_:1}),n(l,{class:"element-value",style:y({color:M()})},{default:r(()=>[d(k($()),1)]),_:1},8,["style"])]),_:1})]),_:1}),n(g,{class:"element-badges"},{default:r(()=>[(u(!0),i(_,null,f(A(),e=>(u(),s(g,{key:e.key,class:m(["element-badge",e.key])},{default:r(()=>[d(k(e.icon),1)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})):t("",!0),v.value&&O.value?(u(),s(D,{key:1,ref_key:"fortuneCardRef",ref:I},null,512)):v.value?(u(),s(g,{key:2,class:"calc-prompt"},{default:r(()=>[n(l,{class:"prompt-text"},{default:r(()=>[d("ç‚¹å‡»è®¡ç®—æ˜Ÿç›˜ï¼Œè§£é”ä½ çš„å‘½ç†å¯†ç ")]),_:1}),n(g,{class:"calc-btn",onClick:B},{default:r(()=>[n(l,null,{default:r(()=>[d("ç«‹å³è®¡ç®—")]),_:1})]),_:1})]),_:1})):t("",!0)]),_:1}),n(g,{class:"features"},{default:r(()=>[n(g,{class:"feature-item",onClick:a[1]||(a[1]=e=>T("/pages/astrology/calculate"))},{default:r(()=>[n(l,{class:"feature-icon"},{default:r(()=>[d("âœ¨")]),_:1}),n(l,{class:"feature-title"},{default:r(()=>[d("æ˜Ÿç›˜è®¡ç®—")]),_:1}),n(l,{class:"feature-desc"},{default:r(()=>[d("é˜³å†è½¬å†œå†ã€æ˜Ÿåº§ã€äº”è¡Œ")]),_:1})]),_:1}),n(g,{class:"feature-item",onClick:a[2]||(a[2]=e=>T("/pages/prayer/list"))},{default:r(()=>[n(l,{class:"feature-icon"},{default:r(()=>[d("ğŸ™")]),_:1}),n(l,{class:"feature-title"},{default:r(()=>[d("å¤åˆç¥ˆæ„¿")]),_:1}),n(l,{class:"feature-desc"},{default:r(()=>[d("ä¸ºçˆ±æƒ…ç¥ˆç¦")]),_:1})]),_:1}),n(g,{class:"feature-item",onClick:a[3]||(a[3]=e=>T("/pages/prayer/devout-list"))},{default:r(()=>[n(l,{class:"feature-icon"},{default:r(()=>[d("ğŸ•¯ï¸")]),_:1}),n(l,{class:"feature-title"},{default:r(()=>[d("è™”è¯šç¥ˆç¥·")]),_:1}),n(l,{class:"feature-desc"},{default:r(()=>[d("å‘ç¥çµç¥ˆæ„¿")]),_:1})]),_:1}),n(g,{class:"feature-item",onClick:a[4]||(a[4]=e=>T("/pages/shop/list"))},{default:r(()=>[n(l,{class:"feature-icon"},{default:r(()=>[d("ğŸ›ï¸")]),_:1}),n(l,{class:"feature-title"},{default:r(()=>[d("å•†åŸ")]),_:1}),n(l,{class:"feature-desc"},{default:r(()=>[d("æ˜Ÿåº§å‘¨è¾¹å•†å“")]),_:1})]),_:1}),n(g,{class:"feature-item",onClick:a[5]||(a[5]=e=>T("/pages/treehole/list"))},{default:r(()=>[n(l,{class:"feature-icon"},{default:r(()=>[d("ğŸŒ³")]),_:1}),n(l,{class:"feature-title"},{default:r(()=>[d("æ ‘æ´")]),_:1}),n(l,{class:"feature-desc"},{default:r(()=>[d("åŒ¿ååˆ†äº«å¿ƒæƒ…")]),_:1})]),_:1}),n(g,{class:"feature-item",onClick:a[6]||(a[6]=e=>T("/pages/dating/matches"))},{default:r(()=>[n(l,{class:"feature-icon"},{default:r(()=>[d("ğŸ’‘")]),_:1}),n(l,{class:"feature-title"},{default:r(()=>[d("ç¼˜åˆ†åŒ¹é…")]),_:1}),n(l,{class:"feature-desc"},{default:r(()=>[d("åŸºäºæ˜Ÿåº§äº”è¡Œçš„äº¤å‹")]),_:1})]),_:1}),n(g,{class:"feature-item",onClick:a[7]||(a[7]=e=>T("/pages/palm/reading"))},{default:r(()=>[n(l,{class:"feature-icon"},{default:r(()=>[d("ğŸ¤š")]),_:1}),n(l,{class:"feature-title"},{default:r(()=>[d("çœ‹æ‰‹ç›¸")]),_:1}),n(l,{class:"feature-desc"},{default:r(()=>[d("AIæ‰‹ç›¸åˆ†æ")]),_:1})]),_:1}),n(g,{class:"feature-item",onClick:a[8]||(a[8]=e=>T("/pages/mbti/result"))},{default:r(()=>[n(l,{class:"feature-icon"},{default:r(()=>[d("ğŸ§ ")]),_:1}),n(l,{class:"feature-title"},{default:r(()=>[d("MBTIæµ‹è¯•")]),_:1}),n(l,{class:"feature-desc"},{default:r(()=>[d("äººæ ¼ç±»å‹åˆ†æ")]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-4a80cdae"]]);export{I as default};
