import{d as e,r as a,c as s,b as l,i as t,o,e as n,f as u,g as c,H as r,y as i,s as d,J as f}from"./index-VE_HmMG4.js";import{a as m,_ as p}from"./_plugin-vue_export-helper.B_VXoL-J.js";import{u as _}from"./user.DucKNo_G.js";const v=p(e({__name:"create",setup(e){const p=a(""),v=a(!1),g=_();async function b(){var e;if(p.value){v.value=!0;try{await m.treehole.create({userId:null==(e=g.userInfo)?void 0:e.id,content:p.value}),d({title:"发布成功",icon:"success"}),setTimeout(()=>{f()},1e3)}catch(a){d({title:a.message||"发布失败",icon:"none"})}finally{v.value=!1}}else d({title:"请输入心情内容",icon:"none"})}return(e,a)=>{const d=u,f=r,m=t,_=i;return o(),s(m,{class:"container"},{default:l(()=>[n(m,{class:"form"},{default:l(()=>[n(m,{class:"form-item"},{default:l(()=>[n(d,{class:"label"},{default:l(()=>[c("心情内容")]),_:1}),n(f,{class:"textarea",modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),placeholder:"写下你的心情..."},null,8,["modelValue"])]),_:1}),n(_,{class:"btn",onClick:b,loading:v.value},{default:l(()=>[c("发布心情")]),_:1},8,["loading"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-bd9d36c5"]]);export{v as default};
