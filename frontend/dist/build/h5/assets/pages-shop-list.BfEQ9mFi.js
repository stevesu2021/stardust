import{d as a,r as e,p as l,q as s,v as t,c,b as u,s as o,i as n,o as d,e as r,f as i,g as p,S as f,h as v,F as _,j as m,l as g,t as y,a as k,m as h,Y as b,Q as x}from"./index-VE_HmMG4.js";import{a as C,_ as w}from"./_plugin-vue_export-helper.B_VXoL-J.js";const U=w(a({__name:"list",setup(a){const w=e("all"),U=e(!1),j=e([]),F=e([]),q=e(0),I=e(!0),L={"å…¨éƒ¨":"ðŸª","æ‰‹ä¸²":"âšª","åŠå ":"ðŸ“¿","é¦™è–°":"ðŸ•¯ï¸","æ°´æ™¶":"ðŸ’Ž","æ˜Ÿåº§æ‰‹é“¾":"â­","çŽ›ç‘™":"ðŸ”´"},N=l(()=>[{id:"all",name:"å…¨éƒ¨",icon:"ðŸª"},...F.value.map(a=>({id:a,name:a,icon:L[a]||"ðŸ“¦"}))]),Q=l(()=>j.value);async function S(){if(!U.value){U.value=!0;try{const a="all"===w.value?void 0:w.value,e=await C.products.getList(q.value,20,a);0===q.value?j.value=e.products:j.value=[...j.value,...e.products],I.value=20===e.products.length,0===F.value.length&&async function(){try{const a=await C.products.getCategories();F.value=a}catch(a){console.error("åŠ è½½åˆ†ç±»å¤±è´¥:",a)}}()}catch(a){o({title:a.message||"åŠ è½½å¤±è´¥",icon:"none"})}finally{U.value=!1}}}function Y(){I.value&&!U.value&&(q.value+=20,S())}return s(()=>{S()}),t(()=>{0===q.value&&S()}),(a,e)=>{const l=i,s=n,t=f,C=h;return d(),c(s,{class:"container"},{default:u(()=>[r(s,{class:"banner"},{default:u(()=>[r(l,{class:"banner-title"},{default:u(()=>[p("ðŸŒŸ æ˜Ÿå¥‘å•†åŸŽ")]),_:1}),r(l,{class:"banner-subtitle"},{default:u(()=>[p("ç²¾é€‰æ˜Ÿåº§å‘¨è¾¹ï¼Œä¸ºä½ å¸¦æ¥å¥½è¿")]),_:1})]),_:1}),r(t,{"scroll-x":"",class:"categories"},{default:u(()=>[r(s,{class:"categories-inner"},{default:u(()=>[(d(!0),v(_,null,m(N.value,a=>(d(),c(s,{key:a.id,class:g(["category-item",{active:w.value===a.id}]),onClick:e=>{return l=a.id,w.value=l,q.value=0,j.value=[],I.value=!0,void S();var l}},{default:u(()=>[r(l,{class:"category-icon"},{default:u(()=>[p(y(a.icon),1)]),_:2},1024),r(l,{class:"category-name"},{default:u(()=>[p(y(a.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),U.value?(d(),c(s,{key:0,class:"loading"},{default:u(()=>[r(l,{class:"loading-text"},{default:u(()=>[p("åŠ è½½ä¸­...")]),_:1})]),_:1})):(d(),c(s,{key:1,class:"products"},{default:u(()=>[(d(!0),v(_,null,m(Q.value,a=>(d(),c(s,{key:a.id,class:"product-item",onClick:e=>function(a){a.productUrl?b({data:a.productUrl,success:()=>{x({title:"æç¤º",content:"å•†å“é“¾æŽ¥å·²å¤åˆ¶ï¼Œå°†åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€",showCancel:!1,success:()=>{window.open(a.productUrl,"_blank")}})}}):o({title:"å•†å“é“¾æŽ¥ä¸å¯ç”¨",icon:"none"})}(a)},{default:u(()=>[r(s,{class:"product-image"},{default:u(()=>[a.imageUrl?(d(),c(C,{key:0,src:a.imageUrl,class:"product-img",mode:"aspectFill"},null,8,["src"])):(d(),c(l,{key:1,class:"product-placeholder"},{default:u(()=>[p("ðŸ“¦")]),_:1}))]),_:2},1024),r(s,{class:"product-info"},{default:u(()=>[r(l,{class:"product-name"},{default:u(()=>[p(y(a.title),1)]),_:2},1024),r(l,{class:"product-shop"},{default:u(()=>[p(y(a.shopName),1)]),_:2},1024),r(s,{class:"product-footer"},{default:u(()=>[r(l,{class:"product-price"},{default:u(()=>[p("Â¥"+y(a.price),1)]),_:2},1024),r(l,{class:"product-category"},{default:u(()=>[p(y(a.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),0===Q.value.length?(d(),c(s,{key:0,class:"empty"},{default:u(()=>[r(l,{class:"empty-icon"},{default:u(()=>[p("ðŸ“¦")]),_:1}),r(l,{class:"empty-text"},{default:u(()=>[p("æš‚æ— å•†å“")]),_:1})]),_:1})):k("",!0),I.value?(d(),c(s,{key:1,class:"load-more",onClick:Y},{default:u(()=>[r(l,{class:"load-more-text"},{default:u(()=>[p("åŠ è½½æ›´å¤š")]),_:1})]),_:1})):k("",!0)]),_:1}))]),_:1})}}}),[["__scopeId","data-v-bf9643ca"]]);export{U as default};
