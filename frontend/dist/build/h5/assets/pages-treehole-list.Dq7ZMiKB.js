import{d as e,r as a,q as t,v as s,s as n,c as l,b as c,i,o,e as u,h as r,F as d,j as f,f as _,g as m,t as p,u as g}from"./index-VE_HmMG4.js";import{a as k,_ as h}from"./_plugin-vue_export-helper.B_VXoL-J.js";const v=h(e({__name:"list",setup(e){const h=a([]);async function v(){try{const e=await k.treehole.public();h.value=e}catch(e){n({title:e.message||"加载失败",icon:"none"})}}function y(){g({url:"/pages/treehole/create"})}function b(e){const a=new Date(e);return`${a.getMonth()+1}/${a.getDate()} ${a.getHours()}:${a.getMinutes().toString().padStart(2,"0")}`}return t(()=>{v()}),s(()=>{v()}),(e,a)=>{const t=_,s=i;return o(),l(s,{class:"container"},{default:c(()=>[u(s,{class:"list"},{default:c(()=>[(o(!0),r(d,null,f(h.value,e=>(o(),l(s,{class:"item",key:e.id},{default:c(()=>[u(s,{class:"item-header"},{default:c(()=>[u(t,{class:"nickname"},{default:c(()=>{var a,t;return[m(p((null==(a=e.user)?void 0:a.anonymousNickname)||(null==(t=e.user)?void 0:t.nickname)||"匿名"),1)]}),_:2},1024),u(t,{class:"time"},{default:c(()=>[m(p(b(e.createdAt)),1)]),_:2},1024)]),_:2},1024),u(s,{class:"item-content"},{default:c(()=>[u(t,{class:"content"},{default:c(()=>[m(p(e.content),1)]),_:2},1024)]),_:2},1024),u(s,{class:"item-footer"},{default:c(()=>[u(t,{class:"likes"},{default:c(()=>[m("❤️ "+p(e.likes),1)]),_:2},1024),u(t,{class:"action",onClick:a=>async function(e){try{await k.treehole.like(e),n({title:"点赞成功",icon:"success"}),v()}catch(a){n({title:a.message||"操作失败",icon:"none"})}}(e.id)},{default:c(()=>[m("点赞")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),u(s,{class:"fab",onClick:y},{default:c(()=>[u(t,{class:"fab-icon"},{default:c(()=>[m("+")]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-7f366cd4"]]);export{v as default};
