import{d as e,r as a,c as l,b as s,i as t,o as u,e as o,f as n,g as c,I as d,H as i,K as r,y as f,s as m,J as v}from"./index-VE_HmMG4.js";import{a as _,_ as p}from"./_plugin-vue_export-helper.B_VXoL-J.js";import{u as g}from"./user.DucKNo_G.js";const h=p(e({__name:"create",setup(e){const p=a(""),h=a(""),b=a(!0),V=a(!1),y=g();function x(e){b.value=e.detail.value}async function I(){var e;if(p.value&&h.value){V.value=!0;try{await _.confession.create({userId:null==(e=y.userInfo)?void 0:e.id,targetName:p.value,content:h.value,isAnonymous:b.value}),m({title:"表白成功",icon:"success"}),setTimeout(()=>{v()},1e3)}catch(a){m({title:a.message||"表白失败",icon:"none"})}finally{V.value=!1}}else m({title:"请填写完整信息",icon:"none"})}return(e,a)=>{const m=n,v=d,_=t,g=i,y=r,j=f;return u(),l(_,{class:"container"},{default:s(()=>[o(_,{class:"form"},{default:s(()=>[o(_,{class:"form-item"},{default:s(()=>[o(m,{class:"label"},{default:s(()=>[c("表白对象")]),_:1}),o(v,{class:"input",modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),placeholder:"对方的名字"},null,8,["modelValue"])]),_:1}),o(_,{class:"form-item"},{default:s(()=>[o(m,{class:"label"},{default:s(()=>[c("表白内容")]),_:1}),o(g,{class:"textarea",modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),placeholder:"写下你的表白..."},null,8,["modelValue"])]),_:1}),o(_,{class:"form-item"},{default:s(()=>[o(m,{class:"label"},{default:s(()=>[c("匿名表白")]),_:1}),o(y,{checked:b.value,onChange:x},null,8,["checked"])]),_:1}),o(j,{class:"btn",onClick:I,loading:V.value},{default:s(()=>[c("发送表白")]),_:1},8,["loading"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-68e21b50"]]);export{h as default};
